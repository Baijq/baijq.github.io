(window.webpackJsonp=window.webpackJsonp||[]).push([[74],{485:function(s,t,a){"use strict";a.r(t);var e=a(62),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"docker-虚拟化容器技术"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-虚拟化容器技术"}},[s._v("#")]),s._v(" Docker-虚拟化容器技术")]),s._v(" "),a("p",[s._v("Docker是开源的应用容器引擎，Docker改变了虚拟化的方式！")]),s._v(" "),a("p",[a("strong",[s._v("三大概念")])]),s._v(" "),a("ul",[a("li",[s._v("镜像：就像安装包一样的东西 （精简的linux+软件文件）")]),s._v(" "),a("li",[s._v("容器：Docker通过安装镜像生成的一个环境，就像应用多开一样，开启的应用环境一样的东西")]),s._v(" "),a("li",[s._v("仓库：应用市场一样的东西，远程仓库，本地仓库 -> "),a("code",[s._v("/var/lib/docker")])])]),s._v(" "),a("h2",{attrs:{id:"一、docker安装和基础命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、docker安装和基础命令"}},[s._v("#")]),s._v(" 一、Docker安装和基础命令")]),s._v(" "),a("h3",{attrs:{id:"_1-docker安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-docker安装"}},[s._v("#")]),s._v(" 1.Docker安装")]),s._v(" "),a("ol",[a("li",[a("p",[a("strong",[s._v("bash安装")]),s._v("（所有得Linux平台）推荐")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -fsSL get.docker.com -o get-docker.sh "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 拉取docker官方脚本")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" get-docker.sh --mirror Aliyun "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 执行脚本，使用阿里云镜像")]),s._v("\nsystemctl "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 把docker服务加入开机自启")]),s._v("\nsystemctl start "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动docker服务 restart 重启 status 状态 stop停止")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 【可选】推荐将当前用户加入docker组")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("groupadd")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("usermod")]),s._v(" -aG "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$USER")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 【可选】配置阿里云加速")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p /etc/docker\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tee")]),s._v(" /etc/docker/daemon.json "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<-")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'EOF\'\n{\n  "registry-mirrors": ["https://09w3lr09.mirror.aliyuncs.com"]\n}\nEOF')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl daemon-reload\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl restart "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("docker在Ubuntu或者deepin里都可以采用一条命令安装")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" docker.io\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动docker服务")]),s._v("\nsystemctl start "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看是否成功")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" version\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("CentOS安装")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 解决Failed to download metadata for repo ‘AppStream’ ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Error: Failed to download metadata for repo 'appstream': Cannot prepare internal mirrorlist: No URLs in mirrorlist")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果上述三个文件中含有 mirrorlist 字段，将这些字段进行注释，并将 baseurl 修改为国内的软件源")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 阿里云")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# baseurl=https://mirrors.aliyun.com/centos/$releasever/BaseOS/$basearch/os/")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 腾讯云")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# baseurl=https://mirrors.tencentyun.com/centos/$releasever/BaseOS/$basearch/os/")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/yum.repos.d/CentOS-Base.repo\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/yum.repos.d/CentOS-AppStream.repo\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/yum.repos.d/CentOS-Extras.repo\n\n安装Docker centos8安装docker\n官方文档：https://docs.docker.com/engine/install/centos/\nbash: yum-config-manager: 未找到命令\nyum -y "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" yum-utils\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1. 查看系统版本 CentOS Linux release 8.2.2004 (Core)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /etc/redhat-release\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2. 添加镜像源（这里是阿里的镜像源）")]),s._v("\nyum-config-manager --add-repo  http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 3. 安装依赖")]),s._v("\nyum -y "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("  yum-utils device-mapper-persistent-data lvm2\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 4. 安装docker-ce")]),s._v("\ndnf -y "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" https://download.docker.com/linux/centos/7/x86_64/stable/Packages/containerd.io-1.2.6-3.3.el7.x86_64.rpm\ndnf -y  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" docker-ce docker-ce-cli --nobest\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 5. 查看docker版本")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" --version\nDocker安装完执行dockers ps报错如下。Cannot connect to the Docker daemon at unix:///var/run/docker.sock. Is the "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" daemon running?解决办法\nsystemctl daemon-reload\nsystemctl restart docker.service\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br")])])])]),s._v(" "),a("h3",{attrs:{id:"_2-docker启动停止"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-docker启动停止"}},[s._v("#")]),s._v(" 2.Docker启动停止")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("启动 Docker")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("systemctl start "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("停止 Docker")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("systemctl stop "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("重启 Docker")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("systemctl restart "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("开机启动")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("systemctl "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("Docker状态")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v(" systemctl status "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])]),s._v(" "),a("h3",{attrs:{id:"_3-docker基础命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-docker基础命令"}},[s._v("#")]),s._v(" 3.Docker基础命令")]),s._v(" "),a("p",[a("strong",[s._v("1.信息和帮助")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" version     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 版本信息")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" info        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 系统信息")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" 命令 --help  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 帮助命令")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[a("strong",[s._v("2.镜像命令image")])]),s._v(" "),a("ol",[a("li",[a("p",[s._v("镜像基础命令")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" images                            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看主机上的镜像")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" search nginx                      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 搜索镜像 和Docker Hub搜索一样")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" pull nginx                        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 下载镜像")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" rmi nginx                         "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除镜像 -f 强制删除，容器也会删除 ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" rmi -f "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" images tomcat -q"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除所有得Tomcat镜像")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("镜像打包")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" commit -m "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"描述信息"')]),s._v(" -a "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"作者信息"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("name 镜像名:tag    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将正在运行容器打包成镜像")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" save tomcat:8.0 -o /root/tomcat-8.0.tar              "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 备份镜像")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" load -i /root/tomcat-8.0.tar                         "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 恢复镜像")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])])])]),s._v(" "),a("p",[a("strong",[s._v("3.容器命令")])]),s._v(" "),a("ol",[a("li",[a("p",[s._v("运行容器")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run --name 容器名 -p 主机端口:容器端口  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-v 主机目录:容器目录:ro "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-d ImageId或者镜像名:TAG\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("blockquote",[a("p",[a("code",[s._v("-p 8080:8080")]),s._v(" 映射端口，将宿主机端口映射到容器端口")]),s._v(" "),a("p",[a("code",[s._v("-d")]),s._v(" 后台运行")]),s._v(" "),a("p",[a("code",[s._v("--name tomcat01")]),s._v(" 指定容器名称为tomcat01")]),s._v(" "),a("p",[a("code",[s._v("-v 宿主机目录:容器目录")])])]),s._v(" "),a("p",[a("strong",[s._v("数据卷 Volume")])]),s._v(" "),a("blockquote",[a("ul",[a("li",[s._v("只能在容器首次启动时候设置")]),s._v(" "),a("li",[s._v("会将容器内原始数据清空，以宿主机为主内容为主")]),s._v(" "),a("li",[s._v("所有数据相关的一般都需要持久化到宿主机。切记")])])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("-v /root/apps:/usr/local/tomcat/webapps     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 把宿主机/root/apps映射到tomcat容器里的/usr/local/tomcat/webapps")]),s._v("\n-v /root/apps:/usr/local/tomcat/webapps:ro  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 只能加在容器里 [ro] 只读read only [rw] 读写模式")]),s._v("\n-v aa:/usr/local/tomcat/webapps \t\t    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# aa数据卷别名，aa不存在自动创建；这种方式会保留容器内的内容")]),s._v("\n\t\t\t\t\t\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# aa默认在宿主机的/var/lib/docker/volumes/下")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("查看容器")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -a -q   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -a 查看所有容器（包括未运行的） -q 只查看容器的ID")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看正在运行的容器")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("停止，重启，暂停容器")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" stop     "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("name\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("kill")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("name  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 强制停止容器")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" restart  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("name\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" pause    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("name  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 暂停容器")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" unpause  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("name  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 恢复暂停容器")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("移除容器")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("name \n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -f "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -aq"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除所有容器 -f 强制删除(可以删除正在运行的容器)")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("查看日志")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" logs    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("name\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])]),s._v(" "),a("p",[s._v("docker logs -f id|name  # 查看实时日志 -t 显示时间\n```")]),s._v(" "),a("ol",{attrs:{start:"7"}},[a("li",[s._v("进入容器内部"),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" -it "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("name "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入正在运行的容器并且（-it）开启交互模式终端 bash是终端，也可以只写 /bin/bash")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v("                          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 退出容器")]),s._v("\nctrl +P +Q                    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 容器不停止退出")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("    \n7. 容器内和宿主机间拷贝复制文件\n\n    ```shell\n    docker cp [宿主机文件路径] [id|name:容器目录或文件]    # 宿主机拷贝到容器中  宿主机 -> 容器\n    docker cp [id|name:容器目录或文件] [宿主机目录或文件]  # 容器中拷贝到宿主机  容器 -> 宿主机\n    ```\n\n9. 查看容器中进程信息\n    ```shell\n    docker top id|name         # 查看容器中进程信息\n    docker inspect id|name     # 获取容器元信息\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("ol",{attrs:{start:"10"}},[a("li",[s._v("创建虚拟网段，同一网段的容器就可以互相访问"),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" network create -d bridge my-bridge    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建网段")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" network inspect my-bridge             "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看网段内容器信息")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" network "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" my-bridge                  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])])])]),s._v(" "),a("h2",{attrs:{id:"docker-安装-nginx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-安装-nginx"}},[s._v("#")]),s._v(" "),a("RouterLink",{attrs:{to:"/core/note/tool/docker/docker-nginx.html"}},[s._v("Docker 安装 Nginx")])],1),s._v(" "),a("h2",{attrs:{id:"docker-安装部署-springboot"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-安装部署-springboot"}},[s._v("#")]),s._v(" "),a("RouterLink",{attrs:{to:"/core/note/tool/docker/docker-springboot.html"}},[s._v("Docker 安装部署 SpringBoot")])],1),s._v(" "),a("h2",{attrs:{id:"docker-安装-tomcat"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-安装-tomcat"}},[s._v("#")]),s._v(" "),a("RouterLink",{attrs:{to:"/core/note/tool/docker/docker-tomcat.html"}},[s._v("Docker 安装 Tomcat")])],1),s._v(" "),a("h2",{attrs:{id:"docker-安装-mysql"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-安装-mysql"}},[s._v("#")]),s._v(" "),a("RouterLink",{attrs:{to:"/core/note/tool/docker/docker-mysql.html"}},[s._v("Docker 安装 MySQL")])],1),s._v(" "),a("h2",{attrs:{id:"docker-安装-sql-server"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-安装-sql-server"}},[s._v("#")]),s._v(" "),a("RouterLink",{attrs:{to:"/core/note/tool/docker/docker-mssql.html"}},[s._v("Docker 安装 SQL Server")])],1),s._v(" "),a("h2",{attrs:{id:"docker-安装-pgsql"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-安装-pgsql"}},[s._v("#")]),s._v(" "),a("RouterLink",{attrs:{to:"/core/note/tool/docker/docker-pgsql.html"}},[s._v("Docker 安装 PGSQL")])],1),s._v(" "),a("h2",{attrs:{id:"docker-安装-jenkins"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-安装-jenkins"}},[s._v("#")]),s._v(" "),a("RouterLink",{attrs:{to:"/core/note/tool/docker/docker-jenkins.html"}},[s._v("Docker 安装 Jenkins")])],1),s._v(" "),a("h2",{attrs:{id:"docker-安装-redis"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-安装-redis"}},[s._v("#")]),s._v(" "),a("RouterLink",{attrs:{to:"/core/note/tool/docker/docker-redis.html"}},[s._v("Docker 安装 Redis")])],1),s._v(" "),a("h2",{attrs:{id:"docker-安装-es和kibana"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-安装-es和kibana"}},[s._v("#")]),s._v(" "),a("RouterLink",{attrs:{to:"/core/note/tool/docker/docker-es.html"}},[s._v("Docker 安装 ES和Kibana")])],1),s._v(" "),a("h2",{attrs:{id:"docker-安装-rabbitmq"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-安装-rabbitmq"}},[s._v("#")]),s._v(" "),a("RouterLink",{attrs:{to:"/core/note/tool/docker/docker-mq.html"}},[s._v("Docker 安装 RabbitMQ")])],1),s._v(" "),a("h2",{attrs:{id:"docker-安装-nacos"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-安装-nacos"}},[s._v("#")]),s._v(" "),a("RouterLink",{attrs:{to:"/core/note/tool/docker/docker-nacos.html"}},[s._v("Docker 安装 Nacos")])],1),s._v(" "),a("h2",{attrs:{id:"docker-安装-clickhouse"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-安装-clickhouse"}},[s._v("#")]),s._v(" "),a("RouterLink",{attrs:{to:"/core/note/tool/docker/docker-clickhouse.html"}},[s._v("Docker 安装 ClickHouse")])],1)])}),[],!1,null,null,null);t.default=n.exports}}]);