<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Docker-虚拟化容器技术 | BiuBiu</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/note/notebook.png">
    <meta name="description" content="让坚持成为品质，让优秀成为习惯">
    
    <link rel="preload" href="/note/assets/css/0.styles.3ff7832e.css" as="style"><link rel="preload" href="/note/assets/js/app.ef321d21.js" as="script"><link rel="preload" href="/note/assets/js/2.4f793508.js" as="script"><link rel="preload" href="/note/assets/js/78.241266c3.js" as="script"><link rel="prefetch" href="/note/assets/js/10.740ddddb.js"><link rel="prefetch" href="/note/assets/js/100.edcdb892.js"><link rel="prefetch" href="/note/assets/js/101.539ca51c.js"><link rel="prefetch" href="/note/assets/js/102.234b6bb4.js"><link rel="prefetch" href="/note/assets/js/103.995ca0da.js"><link rel="prefetch" href="/note/assets/js/104.5fcf95d2.js"><link rel="prefetch" href="/note/assets/js/105.768a22ba.js"><link rel="prefetch" href="/note/assets/js/106.a4297d1b.js"><link rel="prefetch" href="/note/assets/js/107.a05594e3.js"><link rel="prefetch" href="/note/assets/js/108.9a477526.js"><link rel="prefetch" href="/note/assets/js/109.bac52934.js"><link rel="prefetch" href="/note/assets/js/11.bf921344.js"><link rel="prefetch" href="/note/assets/js/110.bdb3407f.js"><link rel="prefetch" href="/note/assets/js/111.5e2be764.js"><link rel="prefetch" href="/note/assets/js/112.5b4a8bb9.js"><link rel="prefetch" href="/note/assets/js/113.f26142bb.js"><link rel="prefetch" href="/note/assets/js/114.330ef2ad.js"><link rel="prefetch" href="/note/assets/js/115.b12c1a7a.js"><link rel="prefetch" href="/note/assets/js/116.bdb6b6cd.js"><link rel="prefetch" href="/note/assets/js/117.f22f3d4e.js"><link rel="prefetch" href="/note/assets/js/118.504536bc.js"><link rel="prefetch" href="/note/assets/js/12.45792551.js"><link rel="prefetch" href="/note/assets/js/13.4ddd53ce.js"><link rel="prefetch" href="/note/assets/js/14.d2dac52c.js"><link rel="prefetch" href="/note/assets/js/15.4c7f4953.js"><link rel="prefetch" href="/note/assets/js/16.252b4803.js"><link rel="prefetch" href="/note/assets/js/17.389df12d.js"><link rel="prefetch" href="/note/assets/js/18.3fb58cd3.js"><link rel="prefetch" href="/note/assets/js/19.fb6bd869.js"><link rel="prefetch" href="/note/assets/js/20.f0e61259.js"><link rel="prefetch" href="/note/assets/js/21.45dc86a3.js"><link rel="prefetch" href="/note/assets/js/22.1f365dfb.js"><link rel="prefetch" href="/note/assets/js/23.5240a888.js"><link rel="prefetch" href="/note/assets/js/24.13926a24.js"><link rel="prefetch" href="/note/assets/js/25.427eede2.js"><link rel="prefetch" href="/note/assets/js/26.83a7e2f1.js"><link rel="prefetch" href="/note/assets/js/27.8e8470ae.js"><link rel="prefetch" href="/note/assets/js/28.4a9d9f18.js"><link rel="prefetch" href="/note/assets/js/29.c4af3eff.js"><link rel="prefetch" href="/note/assets/js/3.65536239.js"><link rel="prefetch" href="/note/assets/js/30.6c65d813.js"><link rel="prefetch" href="/note/assets/js/31.0d4a248a.js"><link rel="prefetch" href="/note/assets/js/32.80d3d31c.js"><link rel="prefetch" href="/note/assets/js/33.945ce008.js"><link rel="prefetch" href="/note/assets/js/34.ec311dcf.js"><link rel="prefetch" href="/note/assets/js/35.8131d94a.js"><link rel="prefetch" href="/note/assets/js/36.214f916e.js"><link rel="prefetch" href="/note/assets/js/37.1aae0b4c.js"><link rel="prefetch" href="/note/assets/js/38.e774c833.js"><link rel="prefetch" href="/note/assets/js/39.7a951da8.js"><link rel="prefetch" href="/note/assets/js/4.6506c3de.js"><link rel="prefetch" href="/note/assets/js/40.d754e4e2.js"><link rel="prefetch" href="/note/assets/js/41.ad5491d1.js"><link rel="prefetch" href="/note/assets/js/42.1f9d159f.js"><link rel="prefetch" href="/note/assets/js/43.576eddf0.js"><link rel="prefetch" href="/note/assets/js/44.3daed17c.js"><link rel="prefetch" href="/note/assets/js/45.ab42f39c.js"><link rel="prefetch" href="/note/assets/js/46.c47f3334.js"><link rel="prefetch" href="/note/assets/js/47.ca8cdbc3.js"><link rel="prefetch" href="/note/assets/js/48.0a908190.js"><link rel="prefetch" href="/note/assets/js/49.06cf1714.js"><link rel="prefetch" href="/note/assets/js/5.6f0fa82e.js"><link rel="prefetch" href="/note/assets/js/50.c84ee983.js"><link rel="prefetch" href="/note/assets/js/51.c62bce73.js"><link rel="prefetch" href="/note/assets/js/52.a2ea4776.js"><link rel="prefetch" href="/note/assets/js/53.a2c09fb6.js"><link rel="prefetch" href="/note/assets/js/54.2b7a8916.js"><link rel="prefetch" href="/note/assets/js/55.76013539.js"><link rel="prefetch" href="/note/assets/js/56.3a07a776.js"><link rel="prefetch" href="/note/assets/js/57.4195744c.js"><link rel="prefetch" href="/note/assets/js/58.a345d448.js"><link rel="prefetch" href="/note/assets/js/59.1c5da848.js"><link rel="prefetch" href="/note/assets/js/6.5bff1b90.js"><link rel="prefetch" href="/note/assets/js/60.79ff0b5d.js"><link rel="prefetch" href="/note/assets/js/61.f6613f4e.js"><link rel="prefetch" href="/note/assets/js/62.9701b85b.js"><link rel="prefetch" href="/note/assets/js/63.8a5b760d.js"><link rel="prefetch" href="/note/assets/js/64.0e750038.js"><link rel="prefetch" href="/note/assets/js/65.a654fe7c.js"><link rel="prefetch" href="/note/assets/js/66.1aa49b0d.js"><link rel="prefetch" href="/note/assets/js/67.029d8caa.js"><link rel="prefetch" href="/note/assets/js/68.6d985750.js"><link rel="prefetch" href="/note/assets/js/69.6bd3973e.js"><link rel="prefetch" href="/note/assets/js/7.4b0fb8dd.js"><link rel="prefetch" href="/note/assets/js/70.327e59e2.js"><link rel="prefetch" href="/note/assets/js/71.c5ca4198.js"><link rel="prefetch" href="/note/assets/js/72.8cd323c0.js"><link rel="prefetch" href="/note/assets/js/73.75caf7a3.js"><link rel="prefetch" href="/note/assets/js/74.4ed749de.js"><link rel="prefetch" href="/note/assets/js/75.7dab4512.js"><link rel="prefetch" href="/note/assets/js/76.a13444c0.js"><link rel="prefetch" href="/note/assets/js/77.bf4bee4f.js"><link rel="prefetch" href="/note/assets/js/79.8cae2b00.js"><link rel="prefetch" href="/note/assets/js/8.1aba4d1c.js"><link rel="prefetch" href="/note/assets/js/80.2fa30180.js"><link rel="prefetch" href="/note/assets/js/81.1bb32d04.js"><link rel="prefetch" href="/note/assets/js/82.edfc6aaf.js"><link rel="prefetch" href="/note/assets/js/83.16eb78f9.js"><link rel="prefetch" href="/note/assets/js/84.421c7dbe.js"><link rel="prefetch" href="/note/assets/js/85.5bbbca19.js"><link rel="prefetch" href="/note/assets/js/86.394addca.js"><link rel="prefetch" href="/note/assets/js/87.7940eeaf.js"><link rel="prefetch" href="/note/assets/js/88.943fc7f9.js"><link rel="prefetch" href="/note/assets/js/89.98f80472.js"><link rel="prefetch" href="/note/assets/js/9.997d7d86.js"><link rel="prefetch" href="/note/assets/js/90.9c274cc3.js"><link rel="prefetch" href="/note/assets/js/91.a47cab79.js"><link rel="prefetch" href="/note/assets/js/92.0956ae0e.js"><link rel="prefetch" href="/note/assets/js/93.090d4492.js"><link rel="prefetch" href="/note/assets/js/94.5e618411.js"><link rel="prefetch" href="/note/assets/js/95.c178c637.js"><link rel="prefetch" href="/note/assets/js/96.66306725.js"><link rel="prefetch" href="/note/assets/js/97.0af3d82f.js"><link rel="prefetch" href="/note/assets/js/98.882f3311.js"><link rel="prefetch" href="/note/assets/js/99.98d64a35.js">
    <link rel="stylesheet" href="/note/assets/css/0.styles.3ff7832e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/note/" class="home-link router-link-active"><!----> <span class="site-name">BiuBiu</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/note/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/note/core/springboot/" class="nav-link">
  SpringBoot
</a></div><div class="nav-item"><a href="/note/core/note/" class="nav-link router-link-active">
  学习笔记
</a></div><div class="nav-item"><a href="/note/core/my/" class="nav-link">
  随心所欲
</a></div><div class="nav-item"><a href="/note/core/about/" class="nav-link">
  关于
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/note/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/note/core/springboot/" class="nav-link">
  SpringBoot
</a></div><div class="nav-item"><a href="/note/core/note/" class="nav-link router-link-active">
  学习笔记
</a></div><div class="nav-item"><a href="/note/core/my/" class="nav-link">
  随心所欲
</a></div><div class="nav-item"><a href="/note/core/about/" class="nav-link">
  关于
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Java</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/note/core/note/java/base.html" class="sidebar-link">JAVA 文章集锦</a></li><li><a href="/note/core/note/java/Java8.html" class="sidebar-link">Java8-Lambda</a></li><li><a href="/note/core/note/java/多线程.html" class="sidebar-link">Java多线程</a></li><li><a href="/note/core/note/java/设计模式.html" class="sidebar-link">设计模式</a></li><li><a href="/note/core/note/java/mybatis.html" class="sidebar-link">MyBatis文档</a></li><li><a href="/note/core/note/java/spring-bean生命周期.html" class="sidebar-link">Spring Bean的生命周期</a></li><li><a href="/note/core/note/java/swagger.html" class="sidebar-link">Swager文档</a></li><li><a href="/note/core/note/java/Java开发工具推荐.html" class="sidebar-link">Java 技术栈开发工具推荐</a></li><li><a href="/note/core/note/java/批处理BAT.html" class="sidebar-link">批处理 BAT</a></li><li><a href="/note/core/note/java/RESTFul篇.html" class="sidebar-link">RESTFul API理解</a></li><li><a href="/note/core/note/java/core-java.html" class="sidebar-link">Java核心基础</a></li><li><a href="/note/core/note/java/websocket.html" class="sidebar-link">WebSocket</a></li><li><a href="/note/core/note/java/HTTP协议.html" class="sidebar-link">HTTP协议和网络</a></li><li><a href="/note/core/note/java/pinpoint.html" class="sidebar-link">pinpoint监控工具</a></li><li><a href="/note/core/note/java/遇到得错误.html" class="sidebar-link">工作遇到错误汇总</a></li><li><a href="/note/core/note/java/数据库文档生成工具.html" class="sidebar-link">数据库文档生成工具screw</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>数据库</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/note/core/note/db/mysql/" class="sidebar-link">MySQL文章集锦</a></li><li><a href="/note/core/note/db/postgrysql/" class="sidebar-link">PostgreSQL</a></li><li><a href="/note/core/note/db/sqlserver/" class="sidebar-link">SQLServer</a></li><li><a href="/note/core/note/db/oracle/" class="sidebar-link">Oracle</a></li><li><a href="/note/core/note/db/redis/" class="sidebar-link">Redis</a></li><li><a href="/note/core/note/db/elasticsearch/" class="sidebar-link">ElasticSearch</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>工具</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/note/core/note/tool/docker/" aria-current="page" class="active sidebar-link">Docker-虚拟化容器技术</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/core/note/tool/docker/#一、docker安装和基础命令" class="sidebar-link">一、Docker安装和基础命令</a></li><li class="sidebar-sub-header"><a href="/note/core/note/tool/docker/#二、dockerfile" class="sidebar-link">二、Dockerfile</a></li><li class="sidebar-sub-header"><a href="/note/core/note/tool/docker/#三、docker-compose" class="sidebar-link">三、Docker-Compose</a></li><li class="sidebar-sub-header"><a href="/note/core/note/tool/docker/#四、docker可视化工具" class="sidebar-link">四、Docker可视化工具</a></li><li class="sidebar-sub-header"><a href="/note/core/note/tool/docker/#docker-安装-nginx" class="sidebar-link">Docker 安装 Nginx</a></li><li class="sidebar-sub-header"><a href="/note/core/note/tool/docker/#docker-安装部署-springboot" class="sidebar-link">Docker 安装部署 SpringBoot</a></li><li class="sidebar-sub-header"><a href="/note/core/note/tool/docker/#docker-安装-tomcat" class="sidebar-link">Docker 安装 Tomcat</a></li><li class="sidebar-sub-header"><a href="/note/core/note/tool/docker/#docker-安装-mysql" class="sidebar-link">Docker 安装 MySQL</a></li><li class="sidebar-sub-header"><a href="/note/core/note/tool/docker/#docker-安装-sql-server" class="sidebar-link">Docker 安装 SQL Server</a></li><li class="sidebar-sub-header"><a href="/note/core/note/tool/docker/#docker-安装-pgsql" class="sidebar-link">Docker 安装 PGSQL</a></li><li class="sidebar-sub-header"><a href="/note/core/note/tool/docker/#docker-安装-jenkins" class="sidebar-link">Docker 安装 Jenkins</a></li><li class="sidebar-sub-header"><a href="/note/core/note/tool/docker/#docker-安装-redis" class="sidebar-link">Docker 安装 Redis</a></li><li class="sidebar-sub-header"><a href="/note/core/note/tool/docker/#docker-安装-es和kibana" class="sidebar-link">Docker 安装 ES和Kibana</a></li><li class="sidebar-sub-header"><a href="/note/core/note/tool/docker/#docker-安装-rabbitmq" class="sidebar-link">Docker 安装 RabbitMQ</a></li><li class="sidebar-sub-header"><a href="/note/core/note/tool/docker/#docker-安装-nacos" class="sidebar-link">Docker 安装 Nacos</a></li><li class="sidebar-sub-header"><a href="/note/core/note/tool/docker/#docker-安装-clickhouse" class="sidebar-link">Docker 安装 ClickHouse</a></li><li class="sidebar-sub-header"><a href="/note/core/note/tool/docker/#docker-安装-minio" class="sidebar-link">Docker 安装 minio</a></li></ul></li><li><a href="/note/core/note/tool/linux/" class="sidebar-link">Linux Centos7</a></li><li><a href="/note/core/note/tool/maven/" class="sidebar-link">Maven-项目管理工具</a></li><li><a href="/note/core/note/tool/nginx/" class="sidebar-link">Nginx-高性能服务器</a></li><li><a href="/note/core/note/tool/curl/" class="sidebar-link">curl简单使用</a></li><li><a href="/note/core/note/tool/tomcat/" class="sidebar-link">Tomcat-服务器</a></li><li><a href="/note/core/note/tool/git/" class="sidebar-link">GIT-版本控制工具</a></li><li><a href="/note/core/note/tool/chrome/" class="sidebar-link">JsonView-Chrome插件</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Python</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/note/core/note/python/" class="sidebar-link">Python</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>前端</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/note/core/note/web/请求API接口.html" class="sidebar-link">Ajax 请求API接口</a></li><li><a href="/note/core/note/web/vue.html" class="sidebar-link">vue</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="docker-虚拟化容器技术"><a href="#docker-虚拟化容器技术" class="header-anchor">#</a> Docker-虚拟化容器技术</h1> <p>Docker是开源的应用容器引擎，Docker改变了虚拟化的方式！</p> <p><strong>三大概念</strong></p> <ul><li>镜像：就像安装包一样的东西 （精简的linux+软件文件）</li> <li>容器：Docker通过安装镜像生成的一个环境，就像应用多开一样，开启的应用环境一样的东西</li> <li>仓库：应用市场一样的东西，远程仓库，本地仓库 -&gt; <code>/var/lib/docker</code></li></ul> <h2 id="一、docker安装和基础命令"><a href="#一、docker安装和基础命令" class="header-anchor">#</a> 一、Docker安装和基础命令</h2> <h3 id="_1-docker安装"><a href="#_1-docker安装" class="header-anchor">#</a> 1.Docker安装</h3> <ol><li><p><strong>bash安装</strong>（所有得Linux平台）推荐</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">curl</span> -fsSL get.docker.com -o get-docker.sh <span class="token comment"># 拉取docker官方脚本</span>
<span class="token function">sh</span> get-docker.sh --mirror Aliyun <span class="token comment"># 执行脚本，使用阿里云镜像</span>
systemctl <span class="token builtin class-name">enable</span> <span class="token function">docker</span> <span class="token comment"># 把docker服务加入开机自启</span>
systemctl start <span class="token function">docker</span> <span class="token comment"># 启动docker服务 restart 重启 status 状态 stop停止</span>

<span class="token comment"># 【可选】推荐将当前用户加入docker组</span>
<span class="token function">groupadd</span> <span class="token function">docker</span>
<span class="token function">usermod</span> -aG <span class="token function">docker</span> <span class="token environment constant">$USER</span>
<span class="token comment"># 【可选】配置阿里云加速</span>
<span class="token function">sudo</span> <span class="token function">mkdir</span> -p /etc/docker
<span class="token function">sudo</span> <span class="token function">tee</span> /etc/docker/daemon.json <span class="token operator">&lt;&lt;-</span><span class="token string">'EOF'
{
  &quot;registry-mirrors&quot;: [&quot;https://09w3lr09.mirror.aliyuncs.com&quot;]
}
EOF</span>
<span class="token function">sudo</span> systemctl daemon-reload
<span class="token function">sudo</span> systemctl restart <span class="token function">docker</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div></li> <li><p>docker在Ubuntu或者deepin里都可以采用一条命令安装</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 安装</span>
<span class="token function">apt</span> <span class="token function">install</span> docker.io
<span class="token comment"># 启动docker服务</span>
systemctl start <span class="token function">docker</span>
<span class="token comment"># 查看是否成功</span>
<span class="token function">docker</span> version
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li><p>CentOS安装</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 解决Failed to download metadata for repo ‘AppStream’ </span>
<span class="token comment"># Error: Failed to download metadata for repo 'appstream': Cannot prepare internal mirrorlist: No URLs in mirrorlist</span>
<span class="token comment"># 如果上述三个文件中含有 mirrorlist 字段，将这些字段进行注释，并将 baseurl 修改为国内的软件源</span>
<span class="token comment"># 阿里云</span>
<span class="token comment"># baseurl=https://mirrors.aliyun.com/centos/$releasever/BaseOS/$basearch/os/</span>
<span class="token comment"># 腾讯云</span>
<span class="token comment"># baseurl=https://mirrors.tencentyun.com/centos/$releasever/BaseOS/$basearch/os/</span>
<span class="token function">vi</span> /etc/yum.repos.d/CentOS-Base.repo
<span class="token function">vi</span> /etc/yum.repos.d/CentOS-AppStream.repo
<span class="token function">vi</span> /etc/yum.repos.d/CentOS-Extras.repo

安装Docker centos8安装docker
官方文档：https://docs.docker.com/engine/install/centos/
bash: yum-config-manager: 未找到命令
yum -y <span class="token function">install</span> yum-utils
<span class="token comment"># 1. 查看系统版本 CentOS Linux release 8.2.2004 (Core)</span>
<span class="token function">cat</span> /etc/redhat-release
<span class="token comment"># 2. 添加镜像源（这里是阿里的镜像源）</span>
yum-config-manager --add-repo  http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo
<span class="token comment"># 3. 安装依赖</span>
yum -y <span class="token function">install</span>  yum-utils device-mapper-persistent-data lvm2
<span class="token comment"># 4. 安装docker-ce</span>
dnf -y <span class="token function">install</span> https://download.docker.com/linux/centos/7/x86_64/stable/Packages/containerd.io-1.2.6-3.3.el7.x86_64.rpm
dnf -y  <span class="token function">install</span> docker-ce docker-ce-cli --nobest
<span class="token comment"># 5. 查看docker版本</span>
<span class="token function">docker</span> --version
Docker安装完执行dockers ps报错如下。Cannot connect to the Docker daemon at unix:///var/run/docker.sock. Is the <span class="token function">docker</span> daemon running?解决办法
systemctl daemon-reload
systemctl restart docker.service
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div></li></ol> <h3 id="_2-docker启动停止"><a href="#_2-docker启动停止" class="header-anchor">#</a> 2.Docker启动停止</h3> <ol><li><p>启动 Docker</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>systemctl start <span class="token function">docker</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>停止 Docker</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>systemctl stop <span class="token function">docker</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>重启 Docker</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>systemctl restart <span class="token function">docker</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>开机启动</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>systemctl <span class="token builtin class-name">enable</span> <span class="token function">docker</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>Docker状态</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code> systemctl status <span class="token function">docker</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ol> <h3 id="_3-docker基础命令"><a href="#_3-docker基础命令" class="header-anchor">#</a> 3.Docker基础命令</h3> <p><strong>1.信息和帮助</strong></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> version     <span class="token comment"># 版本信息</span>
<span class="token function">docker</span> info        <span class="token comment"># 系统信息</span>
<span class="token function">docker</span> 命令 --help  <span class="token comment"># 帮助命令</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>2.镜像命令image</strong></p> <ol><li><p>镜像基础命令</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> images                            <span class="token comment"># 查看主机上的镜像</span>
<span class="token function">docker</span> search nginx                      <span class="token comment"># 搜索镜像 和Docker Hub搜索一样</span>
<span class="token function">docker</span> pull nginx                        <span class="token comment"># 下载镜像</span>
<span class="token function">docker</span> rmi nginx                         <span class="token comment"># 删除镜像 -f 强制删除，容器也会删除 </span>
<span class="token function">docker</span> rmi -f <span class="token variable"><span class="token variable">$(</span><span class="token function">docker</span> images tomcat -q<span class="token variable">)</span></span> <span class="token comment"># 删除所有得Tomcat镜像</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p>镜像打包</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> commit -m <span class="token string">&quot;描述信息&quot;</span> -a <span class="token string">&quot;作者信息&quot;</span> <span class="token function">id</span><span class="token operator">|</span>name 镜像名:tag    <span class="token comment"># 将正在运行容器打包成镜像</span>
<span class="token function">docker</span> save tomcat:8.0 -o /root/tomcat-8.0.tar              <span class="token comment"># 备份镜像</span>
<span class="token function">docker</span> load -i /root/tomcat-8.0.tar                         <span class="token comment"># 恢复镜像</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ol> <p><strong>3.容器命令</strong></p> <ol><li><p>运行容器</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> run --name 容器名 -p 主机端口:容器端口  <span class="token punctuation">\</span>
-v 主机目录:容器目录:ro <span class="token punctuation">\</span>
-d ImageId或者镜像名:TAG
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><p><code>-p 8080:8080</code> 映射端口，将宿主机端口映射到容器端口</p> <p><code>-d</code> 后台运行</p> <p><code>--name tomcat01</code> 指定容器名称为tomcat01</p> <p><code>-v 宿主机目录:容器目录</code></p></blockquote> <p><strong>数据卷 Volume</strong></p> <blockquote><ul><li>只能在容器首次启动时候设置</li> <li>会将容器内原始数据清空，以宿主机为主内容为主</li> <li>所有数据相关的一般都需要持久化到宿主机。切记</li></ul></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>-v /root/apps:/usr/local/tomcat/webapps     <span class="token comment"># 把宿主机/root/apps映射到tomcat容器里的/usr/local/tomcat/webapps</span>
-v /root/apps:/usr/local/tomcat/webapps:ro  <span class="token comment"># 只能加在容器里 [ro] 只读read only [rw] 读写模式</span>
-v aa:/usr/local/tomcat/webapps 		    <span class="token comment"># aa数据卷别名，aa不存在自动创建；这种方式会保留容器内的内容</span>
											<span class="token comment"># aa默认在宿主机的/var/lib/docker/volumes/下</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p>查看容器</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> <span class="token function">ps</span> -a -q   <span class="token comment"># -a 查看所有容器（包括未运行的） -q 只查看容器的ID</span>
<span class="token function">docker</span> <span class="token function">ps</span>         <span class="token comment"># 查看正在运行的容器</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p>停止，重启，暂停容器</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> stop     <span class="token function">id</span><span class="token operator">|</span>name
<span class="token function">docker</span> <span class="token function">kill</span>     <span class="token function">id</span><span class="token operator">|</span>name  <span class="token comment"># 强制停止容器</span>
<span class="token function">docker</span> restart  <span class="token function">id</span><span class="token operator">|</span>name
<span class="token function">docker</span> pause    <span class="token function">id</span><span class="token operator">|</span>name  <span class="token comment"># 暂停容器</span>
<span class="token function">docker</span> unpause  <span class="token function">id</span><span class="token operator">|</span>name  <span class="token comment"># 恢复暂停容器</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p>移除容器</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> <span class="token function">rm</span> <span class="token function">id</span><span class="token operator">|</span>name 
<span class="token function">docker</span> <span class="token function">rm</span> -f <span class="token variable"><span class="token variable">$(</span><span class="token function">docker</span> <span class="token function">ps</span> -aq<span class="token variable">)</span></span> <span class="token comment"># 删除所有容器 -f 强制删除(可以删除正在运行的容器)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p>查看日志</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> logs    <span class="token function">id</span><span class="token operator">|</span>name
<span class="token function">docker</span> logs -f <span class="token function">id</span><span class="token operator">|</span>name  <span class="token comment"># 查看实时日志 -t 显示时间</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p>进入容器内部</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> <span class="token builtin class-name">exec</span> -it <span class="token function">id</span><span class="token operator">|</span>name <span class="token function">bash</span>  <span class="token comment"># 进入正在运行的容器并且（-it）开启交互模式终端 bash是终端，也可以只写 /bin/bash</span>
<span class="token builtin class-name">exit</span>                          <span class="token comment"># 退出容器</span>
ctrl +P +Q                    <span class="token comment"># 容器不停止</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p>退出容器内和宿主机间拷贝复制文件</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> <span class="token function">cp</span> <span class="token punctuation">[</span>宿主机文件路径<span class="token punctuation">]</span> <span class="token punctuation">[</span>id<span class="token operator">|</span>name:容器目录或文件<span class="token punctuation">]</span>    <span class="token comment"># 宿主机拷贝到容器中  宿主机 -&gt; 容器</span>
<span class="token function">docker</span> <span class="token function">cp</span> <span class="token punctuation">[</span>id<span class="token operator">|</span>name:容器目录或文件<span class="token punctuation">]</span> <span class="token punctuation">[</span>宿主机目录或文件<span class="token punctuation">]</span>  <span class="token comment"># 容器中拷贝到宿主机  容器 -&gt; 宿主机</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p>查看容器中进程信息</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> <span class="token function">top</span> <span class="token function">id</span><span class="token operator">|</span>name         <span class="token comment"># 查看容器中进程信息</span>
<span class="token function">docker</span> inspect <span class="token function">id</span><span class="token operator">|</span>name     <span class="token comment"># 获取容器元信息</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p>创建虚拟网段，同一网段的容器就可以互相通信</p> <blockquote><p>默认情况下，Docker创建容器时把所有容器都连接在docker0网桥上，默认在docker0网桥上的所有容器间都可以使用容器内IP通信</p> <p>要想使用容器id或者容器名通信，必须自定义网桥 一般一个项目新建一个网桥</p> <ul><li>启动容器的时候，指定网络 <code>docker run -d --network ufs xxx</code></li> <li>容器启动后，在加入网络 <code>docker network connect ufs tomcat01</code> 把tomcat01加入ufs网络中</li></ul></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> network create -d bridge my-bridge    <span class="token comment"># 创建网段，一般名称选择项目名称</span>
<span class="token function">docker</span> network <span class="token function">ls</span>							 <span class="token comment"># 查看列表</span>
<span class="token function">docker</span> network inspect my-bridge             <span class="token comment"># 查看网段内容器信息</span>
<span class="token function">docker</span> network <span class="token function">rm</span> my-bridge                  <span class="token comment"># 删除</span>
<span class="token function">docker</span> network prune                 		 <span class="token comment"># 删除没有使用的网桥</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ol> <h2 id="二、dockerfile"><a href="#二、dockerfile" class="header-anchor">#</a> 二、Dockerfile</h2> <p>Dockerfile是镜像的描述文件。通过Dockerfile可以构建一个镜像。</p> <h3 id="_1-指令说明"><a href="#_1-指令说明" class="header-anchor">#</a> 1.指令说明</h3> <p>每条保留字必须大写，后面至少跟一个参数，指令从上到下顺序执行，<code>#</code>表示注释 每条指令都会创建新的镜像层，并且提交。</p> <table><thead><tr><th>保留字（大写）</th> <th>作用</th></tr></thead> <tbody><tr><td>FROM</td> <td>当前镜像基于哪个镜像 <font color="red">第一个指令必须是FROM</font></td></tr> <tr><td>MAINTAINER</td> <td>镜像的作者和邮箱地址，非必需了</td></tr> <tr><td>RUN</td> <td>构建镜像时需要运行的指令</td></tr> <tr><td>EXPOST</td> <td>容器对外暴露的端口号，仅仅是声明一下给用户看一下，不写也可以</td></tr> <tr><td>WORKDIR</td> <td>创建容器后，终端默认登录进来的工作目录</td></tr> <tr><td>ENV</td> <td>构建镜像过程中设置的环境变量</td></tr> <tr><td>ADD</td> <td>宿主机目录下的文件拷贝进镜像，并且会自动处理URL和解压tar包</td></tr> <tr><td>COPY</td> <td>拷贝文件和目录到镜像中，和ADD类似</td></tr> <tr><td>VOLUME</td> <td>设置数据卷，也属于描述类型的给使用者看一下而已</td></tr> <tr><td>CMD</td> <td>指定容器启动时要运行的命令，存在多个时只要最后一个生效，多用于可以传参的</td></tr> <tr><td>ENTRYPOINT</td> <td>指定容器启动时要运行的命令，多用于固定的指令</td></tr></tbody></table> <h3 id="_2-示例"><a href="#_2-示例" class="header-anchor">#</a> 2.示例</h3> <div class="language-dockerfile line-numbers-mode"><pre class="language-dockerfile"><code><span class="token instruction"><span class="token keyword">FROM</span> openjdk:8-jre</span>
<span class="token instruction"><span class="token keyword">COPY</span> *.jar /app.jar</span>
<span class="token instruction"><span class="token keyword">CMD</span> [<span class="token string">&quot;--server.port=8848&quot;</span>]</span>
<span class="token instruction"><span class="token keyword">EXPOSE</span> 8848</span>
<span class="token instruction"><span class="token keyword">ENTRYPOINT</span> [<span class="token string">&quot;java&quot;</span>, <span class="token string">&quot;-jar&quot;</span>, <span class="token string">&quot;/app.jar&quot;</span>]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p><code>docker build -t image-name:1.0</code> 基于Dockerfile打包镜像</p></blockquote> <h2 id="三、docker-compose"><a href="#三、docker-compose" class="header-anchor">#</a> 三、Docker-Compose</h2> <p>随着微服务等项目的发展，一个项目依赖太多的容器，每个容器之间的关系以及n多个容器编排就比较困难，于是docker-compose应运而生，可以极大的方便我们去<font color="red">做容器的编排</font>。</p> <p>docker-compose让我们可以站在<font color="red">项目的角度去管理一组容器</font></p> <h3 id="_1-docker-compose安装"><a href="#_1-docker-compose安装" class="header-anchor">#</a> 1.Docker-Compose安装</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">curl</span> -L https://get.daocloud.io/docker/compose/releases/download/1.25.0/docker-compose-<span class="token variable"><span class="token variable">`</span><span class="token function">uname</span> -s<span class="token variable">`</span></span>-<span class="token variable"><span class="token variable">`</span><span class="token function">uname</span> -m<span class="token variable">`</span></span> <span class="token operator">&gt;</span> /usr/local/bin/docker-compose
<span class="token comment"># github慢死了</span>
<span class="token function">sudo</span> <span class="token function">curl</span> -L https://github.com/docker/compose/releases/download/1.25.0/docker-compose-<span class="token variable"><span class="token variable">`</span><span class="token function">uname</span> -s<span class="token variable">`</span></span>-<span class="token variable"><span class="token variable">`</span><span class="token function">uname</span> -m<span class="token variable">`</span></span> -o /usr/local/bin/docker-compose

<span class="token function">chmod</span> +x /usr/local/bin/docker-compose
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>或者下载下来后，放到 <code>/usr/local/bin/docker-compose</code> 改下执行权限即可</p> <h3 id="_2-docker-compose-yml"><a href="#_2-docker-compose-yml" class="header-anchor">#</a> 2.docker-compose.yml</h3> <p><a href="https://gitee.com/baijq/cloud-docker" target="_blank" rel="noopener noreferrer">示例：Cloud 以及各个组件。参考了若依的<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>项目 Project 一组关联的容器组成的一个完整业务单元</p> <p>服务 Service 一个项目中的某一个容器</p> <p><strong>常用命令说明</strong></p> <table><thead><tr><th>模板命令</th> <th>说明</th></tr></thead> <tbody><tr><td>version</td> <td><a href="https://docs.docker.com/compose/compose-file/compose-versioning/" target="_blank" rel="noopener noreferrer">docker-compose项目版本<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td></tr> <tr><td>build</td> <td>根据Dockerfile构建镜像，并且启动</td></tr> <tr><td>container_name</td> <td>指定容器名称，可以使用默认的，可以指定</td></tr> <tr><td>depends_on</td> <td>解决容器启动的先后问题，当前服务不会等待被依赖的服务完全启动之后才启动</td></tr> <tr><td>environment</td> <td><code>&quot;MYSQL_ROOT_PASSWORD=123456&quot;</code> 环境配置信息</td></tr> <tr><td>env_file</td> <td><code>.env</code> 环境配置文件  docker run <font color="red">-e</font></td></tr> <tr><td>expose</td> <td>指定构建镜像过程中暴露的端口号</td></tr> <tr><td>image</td> <td><code>mysql:latest</code> 指定服务使用的镜像  docker run <font color="red">image</font></td></tr> <tr><td>networks</td> <td>指定网桥，需要先声明 docker run <font color="red">--network</font></td></tr> <tr><td>ports</td> <td>宿主机和容器端口映射  docker run <font color="red">-p</font></td></tr> <tr><td>volumes</td> <td>数据卷映射 <code>/root/mysql/data:/var/lib/mysql</code>   docker run <font color="red">-v</font></td></tr> <tr><td>restart</td> <td>docker run <font color="red">--restart=always</font></td></tr></tbody></table> <p><strong>使用步骤</strong></p> <ol><li><p>新建一个项目比如 <code>ufs</code></p></li> <li><p>新建配置文件 <code>docker-compose.yml</code></p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&quot;3.0&quot;</span> <span class="token comment"># docker-compose项目版本</span>

<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">apps</span><span class="token punctuation">:</span>
    <span class="token key atrule">build</span><span class="token punctuation">:</span>
      <span class="token key atrule">context</span><span class="token punctuation">:</span> ./
      <span class="token key atrule">dockerfile</span><span class="token punctuation">:</span> Dockerfile
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;9001:9001&quot;</span>
    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> mysql
      <span class="token punctuation">-</span> redis
      <span class="token punctuation">-</span> es
      <span class="token punctuation">-</span> mq
  <span class="token key atrule">redis</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> redis<span class="token punctuation">:</span>latest
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;6380:6379&quot;</span>
  <span class="token key atrule">mysql</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> mysql<span class="token punctuation">:</span>latest
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;3307:3306&quot;</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;MYSQL_ROOT_PASSWORD=123456&quot;</span>  <span class="token comment"># mysql设置环境参数</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> /root/mysql/data<span class="token punctuation">:</span>/var/lib/mysql <span class="token comment"># 配置映射路径</span>
  <span class="token key atrule">es</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> elasticsearch<span class="token punctuation">:</span>7.12.0
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;9200:9200&quot;</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;9300:9300&quot;</span>
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> /root/elasticsearch/config/elasticsearch.yml<span class="token punctuation">:</span>/usr/share/elasticsearch/config/elasticsearch.yml
      <span class="token punctuation">-</span> /root/elasticsearch/data<span class="token punctuation">:</span>/usr/share/elasticsearch/data
      <span class="token punctuation">-</span> /root/elasticsearch/plugins<span class="token punctuation">:</span>/usr/share/elasticsearch/plugins
  <span class="token key atrule">mq</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> rabbitmq<span class="token punctuation">:</span>management
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;5672:5672&quot;</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;15672:15672&quot;</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;RABBITMQ_DEFAULT_USER=admin&quot;</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;RABBITMQ_DEFAULT_PASSWORD=123456&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div></li> <li><p>docker-compose命令</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker-compose</span> up                	 		<span class="token comment"># 对整个项目里所有服务启动</span>
<span class="token function">docker-compose</span> up -d mysql	redis			 <span class="token comment"># 对项目里的mysql,redis服务启动 -d 后台启动</span>
<span class="token function">docker-compose</span> down 服务Id   					<span class="token comment"># 关闭某个服务，同时会移除网络</span>
<span class="token function">docker-compose</span> <span class="token builtin class-name">exec</span> 服务Id <span class="token function">bash</span>  				<span class="token comment"># 同docker exec </span>
<span class="token function">docker-compose</span> <span class="token function">ps</span>			  		 	 	 <span class="token comment"># 同docker ps </span>
<span class="token function">docker-compose</span> restart 服务Id	-t <span class="token number">10</span>			<span class="token comment"># 同docker ps -t 延时10s启动</span>
<span class="token function">docker-compose</span> <span class="token function">rm</span> -f 服务Id					<span class="token comment"># 同docker rm -f  【-v】 删除数据卷</span>
<span class="token function">docker-compose</span> <span class="token function">top</span> 服务Id						<span class="token comment"># 查看top</span>
<span class="token function">docker-compose</span> logs -f 服务Id				    <span class="token comment"># docker logs -f xxx</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li></ol> <h2 id="四、docker可视化工具"><a href="#四、docker可视化工具" class="header-anchor">#</a> 四、Docker可视化工具</h2> <p>第三方公司提供的开源Portainer项目，用来对docker引擎中运行的所有容器可视化展示</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> run -p <span class="token number">8000</span>:8000 -p <span class="token number">9000</span>:9000 <span class="token punctuation">\</span>
    --name portainer <span class="token punctuation">\</span>
    --restart<span class="token operator">=</span>always <span class="token punctuation">\</span>
    -v /var/run/docker.sock:/var/run/docker.sock <span class="token punctuation">\</span>
    -v /root/portainer/data:/data <span class="token punctuation">\</span>
    -d portainer/portainer
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><img src="https://s1.ax1x.com/2022/11/25/ztFTiD.png" alt="ztFTiD.png"></p> <h2 id="docker-安装-nginx"><a href="#docker-安装-nginx" class="header-anchor">#</a> <a href="/note/core/note/tool/docker/docker-nginx.html">Docker 安装 Nginx</a></h2> <h2 id="docker-安装部署-springboot"><a href="#docker-安装部署-springboot" class="header-anchor">#</a> <a href="/note/core/note/tool/docker/docker-springboot.html">Docker 安装部署 SpringBoot</a></h2> <h2 id="docker-安装-tomcat"><a href="#docker-安装-tomcat" class="header-anchor">#</a> <a href="/note/core/note/tool/docker/docker-tomcat.html">Docker 安装 Tomcat</a></h2> <h2 id="docker-安装-mysql"><a href="#docker-安装-mysql" class="header-anchor">#</a> <a href="/note/core/note/tool/docker/docker-mysql.html">Docker 安装 MySQL</a></h2> <h2 id="docker-安装-sql-server"><a href="#docker-安装-sql-server" class="header-anchor">#</a> <a href="/note/core/note/tool/docker/docker-mssql.html">Docker 安装 SQL Server</a></h2> <h2 id="docker-安装-pgsql"><a href="#docker-安装-pgsql" class="header-anchor">#</a> <a href="/note/core/note/tool/docker/docker-pgsql.html">Docker 安装 PGSQL</a></h2> <h2 id="docker-安装-jenkins"><a href="#docker-安装-jenkins" class="header-anchor">#</a> <a href="/note/core/note/tool/docker/docker-jenkins.html">Docker 安装 Jenkins</a></h2> <h2 id="docker-安装-redis"><a href="#docker-安装-redis" class="header-anchor">#</a> <a href="/note/core/note/tool/docker/docker-redis.html">Docker 安装 Redis</a></h2> <h2 id="docker-安装-es和kibana"><a href="#docker-安装-es和kibana" class="header-anchor">#</a> <a href="/note/core/note/tool/docker/docker-es.html">Docker 安装 ES和Kibana</a></h2> <h2 id="docker-安装-rabbitmq"><a href="#docker-安装-rabbitmq" class="header-anchor">#</a> <a href="/note/core/note/tool/docker/docker-mq.html">Docker 安装 RabbitMQ</a></h2> <h2 id="docker-安装-nacos"><a href="#docker-安装-nacos" class="header-anchor">#</a> <a href="/note/core/note/tool/docker/docker-nacos.html">Docker 安装 Nacos</a></h2> <h2 id="docker-安装-clickhouse"><a href="#docker-安装-clickhouse" class="header-anchor">#</a> <a href="/note/core/note/tool/docker/docker-clickhouse.html">Docker 安装 ClickHouse</a></h2> <h2 id="docker-安装-minio"><a href="#docker-安装-minio" class="header-anchor">#</a> <a href="/note/core/note/tool/docker/docker-minio.html">Docker 安装 minio</a></h2></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/note/core/note/db/elasticsearch/" class="prev">
        ElasticSearch
      </a></span> <span class="next"><a href="/note/core/note/tool/linux/">
        Linux Centos7
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/note/assets/js/app.ef321d21.js" defer></script><script src="/note/assets/js/2.4f793508.js" defer></script><script src="/note/assets/js/78.241266c3.js" defer></script>
  </body>
</html>
